<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>顏色辨認遊戲</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
        }

        .game-container {
            text-align: center;
            background: rgba(255, 255, 255, 0.1);
            padding: 40px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            max-width: 600px;
        }

        .difficulty-selector {
            margin-bottom: 30px;
        }

        .difficulty-btn {
            padding: 10px 20px;
            margin: 0 10px;
            border: 2px solid white;
            border-radius: 25px;
            background: transparent;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .difficulty-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .difficulty-btn.active {
            background: white;
            color: #333;
        }

        .timer {
            font-size: 1.5em;
            margin-bottom: 20px;
            color: #ff6b6b;
            font-weight: bold;
        }

        .timer.warning {
            color: #ff3333;
            animation: pulse 0.5s infinite alternate;
        }

        @keyframes pulse {
            from { transform: scale(1); }
            to { transform: scale(1.1); }
        }

        .title {
            font-size: 2.5em;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .score-board {
            display: flex;
            justify-content: space-around;
            margin-bottom: 30px;
            font-size: 1.2em;
        }

        .score-item {
            background: rgba(255, 255, 255, 0.2);
            padding: 10px 20px;
            border-radius: 10px;
        }

        .color-display {
            width: 200px;
            height: 200px;
            margin: 0 auto 30px;
            border-radius: 50%;
            border: 5px solid white;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }

        .color-name {
            font-size: 2em;
            margin-bottom: 30px;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }

        .options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            max-width: 400px;
            margin: 0 auto 30px;
        }

        .option {
            padding: 15px 25px;
            font-size: 1.1em;
            border: none;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .color-option {
            width: 80px;
            height: 40px;
            border-radius: 8px;
            border: 3px solid white;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .visitor-counter {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px 15px;
            border-radius: 20px;
            font-size: 0.9em;
        }

        .option:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .option.correct {
            background: #4CAF50;
            color: white;
        }

        .option.wrong {
            background: #f44336;
            color: white;
        }

        .next-btn {
            padding: 12px 30px;
            font-size: 1.1em;
            border: none;
            border-radius: 25px;
            background: #ff6b6b;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .next-btn:hover {
            transform: scale(1.05);
            background: #ff5252;
        }

        .next-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .game-over {
            display: none;
            text-align: center;
        }

        .restart-btn {
            padding: 15px 30px;
            font-size: 1.2em;
            border: none;
            border-radius: 25px;
            background: #4CAF50;
            color: white;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        .restart-btn:hover {
            transform: scale(1.05);
            background: #45a049;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1 class="title">顏色辨認遊戲</h1>
        
        <div class="difficulty-selector">
            <button class="difficulty-btn active" onclick="setDifficulty('easy')">簡單</button>
            <button class="difficulty-btn" onclick="setDifficulty('medium')">中等</button>
            <button class="difficulty-btn" onclick="setDifficulty('hard')">困難</button>
        </div>
        
        <div class="timer" id="timer" style="display: none;">時間: <span id="timeLeft">10</span>秒</div>
        
        <div class="score-board">
            <div class="score-item">
                <div>得分: <span id="score">0</span></div>
            </div>
            <div class="score-item">
                <div>題目: <span id="question">1</span>/10</div>
            </div>
        </div>

        <div id="game-area">
            <div class="color-display" id="colorDisplay"></div>
            <div class="color-name" id="colorName">選擇相同的顏色</div>
            
            <div class="options" id="options">
                <button class="option" onclick="selectOption(0)"></button>
                <button class="option" onclick="selectOption(1)"></button>
                <button class="option" onclick="selectOption(2)"></button>
                <button class="option" onclick="selectOption(3)"></button>
            </div>
            
            <button class="next-btn" id="nextBtn" onclick="nextQuestion()" disabled>下一題</button>
        </div>

        <div class="game-over" id="gameOver">
            <h2>遊戲結束！</h2>
            <p>你的最終得分：<span id="finalScore">0</span>/10</p>
            <button class="restart-btn" onclick="restartGame()">重新開始</button>
        </div>
    </div>

    <div class="visitor-counter">
        訪客人次: <span id="visitorCount">1</span>
    </div>

    <script>
        const easyColors = [
            { name: '紅色', hex: '#FF0000' },
            { name: '藍色', hex: '#0000FF' },
            { name: '綠色', hex: '#00FF00' },
            { name: '黃色', hex: '#FFFF00' },
            { name: '紫色', hex: '#800080' },
            { name: '橙色', hex: '#FFA500' },
            { name: '粉紅色', hex: '#FFC0CB' },
            { name: '棕色', hex: '#A52A2A' }
        ];

        const mediumColors = [
            { name: '深紅色', hex: '#8B0000' },
            { name: '天藍色', hex: '#87CEEB' },
            { name: '橄欖綠', hex: '#556B2F' },
            { name: '金黃色', hex: '#FFD700' },
            { name: '薰衣草紫', hex: '#E6E6FA' },
            { name: '珊瑚橙', hex: '#FF7F50' },
            { name: '玫瑰粉', hex: '#FFB6C1' },
            { name: '巧克力棕', hex: '#D2691E' },
            { name: '青綠色', hex: '#008B8B' },
            { name: '海軍藍', hex: '#191970' },
            { name: '檸檬黃', hex: '#FFFACD' },
            { name: '洋紅色', hex: '#FF00FF' }
        ];

        const hardColors = [
            { name: '暗紅色', hex: '#8B0000' },
            { name: '亮紅色', hex: '#FF6B6B' },
            { name: '深藍色', hex: '#000080' },
            { name: '淺藍色', hex: '#ADD8E6' },
            { name: '墨綠色', hex: '#006400' },
            { name: '淺綠色', hex: '#90EE90' },
            { name: '深紫色', hex: '#4B0082' },
            { name: '淺紫色', hex: '#DDA0DD' },
            { name: '暗黃色', hex: '#B8860B' },
            { name: '亮黃色', hex: '#FFFF99' }
        ];

        const colorMixQuestions = [
            { color1: '紅色', color2: '黃色', result: '橙色', resultHex: '#FFA500' },
            { color1: '藍色', color2: '黃色', result: '綠色', resultHex: '#00FF00' },
            { color1: '紅色', color2: '藍色', result: '紫色', resultHex: '#800080' },
            { color1: '白色', color2: '黑色', result: '灰色', resultHex: '#808080' },
            { color1: '紅色', color2: '白色', result: '粉紅色', resultHex: '#FFC0CB' }
        ];

        let currentQuestion = 1;
        let score = 0;
        let correctAnswer = 0;
        let answered = false;
        let difficulty = 'easy';
        let timeLeft = 10;
        let timer = null;
        let currentColors = easyColors;

        function setDifficulty(level) {
            difficulty = level;
            currentColors = level === 'easy' ? easyColors : level === 'medium' ? mediumColors : hardColors;
            
            document.querySelectorAll('.difficulty-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            if (level === 'medium' || level === 'hard') {
                document.getElementById('timer').style.display = 'block';
                timeLeft = level === 'medium' ? 15 : 8;
            } else {
                document.getElementById('timer').style.display = 'none';
            }
            
            restartGame();
        }

        function startTimer() {
            if (difficulty === 'easy') return;
            
            timeLeft = difficulty === 'medium' ? 15 : 8;
            document.getElementById('timeLeft').textContent = timeLeft;
            document.getElementById('timer').classList.remove('warning');
            
            timer = setInterval(() => {
                timeLeft--;
                document.getElementById('timeLeft').textContent = timeLeft;
                
                if (timeLeft <= 3) {
                    document.getElementById('timer').classList.add('warning');
                }
                
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    if (!answered) {
                        selectOption(-1);
                    }
                }
            }, 1000);
        }

        function getRandomColor() {
            return currentColors[Math.floor(Math.random() * currentColors.length)];
        }

        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        function generateQuestion() {
            if (timer) clearInterval(timer);
            
            let targetColor, questionText, allOptions, isColorMixQuestion = false;
            
            if (difficulty === 'hard') {
                const questionType = Math.random() < 0.5 ? 'shade' : 'mix';
                
                if (questionType === 'mix') {
                    const mixQuestion = colorMixQuestions[Math.floor(Math.random() * colorMixQuestions.length)];
                    targetColor = { name: mixQuestion.result, hex: mixQuestion.resultHex };
                    
                    const otherResults = colorMixQuestions
                        .filter(q => q.result !== mixQuestion.result)
                        .map(q => ({ name: q.result, hex: q.resultHex }))
                        .slice(0, 3);
                    
                    allOptions = shuffleArray([targetColor, ...otherResults]);
                    questionText = `${mixQuestion.color1} + ${mixQuestion.color2} = ?`;
                    isColorMixQuestion = true;
                } else {
                    targetColor = getRandomColor();
                    const otherColors = currentColors.filter(color => color !== targetColor);
                    const shuffledOthers = shuffleArray(otherColors).slice(0, 3);
                    allOptions = shuffleArray([targetColor, ...shuffledOthers]);
                    questionText = '選擇相同的顏色：';
                }
            } else {
                targetColor = getRandomColor();
                const otherColors = currentColors.filter(color => color !== targetColor);
                const shuffledOthers = shuffleArray(otherColors).slice(0, 3);
                allOptions = shuffleArray([targetColor, ...shuffledOthers]);
                questionText = difficulty === 'medium' ? '選擇相同的顏色：' : '選擇相同的顏色：';
            }
            
            correctAnswer = allOptions.indexOf(targetColor);
            
            document.getElementById('colorDisplay').style.backgroundColor = targetColor.hex;
            document.getElementById('colorName').textContent = questionText;
            
            const optionButtons = document.querySelectorAll('.option');
            optionButtons.forEach((button, index) => {
                button.className = 'option';
                button.disabled = false;
                button.innerHTML = `<div class="color-option" style="background-color: ${allOptions[index].hex}"></div>`;
            });
            
            document.getElementById('nextBtn').disabled = true;
            answered = false;
            
            startTimer();
        }

        function selectOption(selectedIndex) {
            if (answered) return;
            
            answered = true;
            if (timer) clearInterval(timer);
            
            const optionButtons = document.querySelectorAll('.option');
            
            optionButtons.forEach((button, index) => {
                button.disabled = true;
                if (index === correctAnswer) {
                    button.classList.add('correct');
                } else if (index === selectedIndex) {
                    button.classList.add('wrong');
                }
            });
            
            if (selectedIndex === correctAnswer) {
                score++;
                document.getElementById('score').textContent = score;
            }
            
            document.getElementById('nextBtn').disabled = false;
        }

        function nextQuestion() {
            if (currentQuestion >= 10) {
                endGame();
                return;
            }
            
            currentQuestion++;
            document.getElementById('question').textContent = currentQuestion;
            generateQuestion();
        }

        function endGame() {
            document.getElementById('gameArea').style.display = 'none';
            document.getElementById('gameOver').style.display = 'block';
            document.getElementById('finalScore').textContent = score;
        }

        function restartGame() {
            currentQuestion = 1;
            score = 0;
            if (timer) clearInterval(timer);
            document.getElementById('score').textContent = score;
            document.getElementById('question').textContent = currentQuestion;
            document.getElementById('gameArea').style.display = 'block';
            document.getElementById('gameOver').style.display = 'none';
            generateQuestion();
        }

        function updateVisitorCount() {
            let count = localStorage.getItem('visitorCount');
            if (!count) {
                count = 0;
            }
            count = parseInt(count) + 1;
            localStorage.setItem('visitorCount', count);
            document.getElementById('visitorCount').textContent = count;
        }

        updateVisitorCount();
        generateQuestion();
    </script>

    
</body>
</html>